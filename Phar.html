<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EMT Pharmacology Study Tool v5</title>
    <style>
        :root {
            --primary-color: #005A9C; --secondary-color: #0d6efd; --light-bg: #F8F9FA;
            --dark-text: #212529; --light-text: #6C757D; --correct-color: #198754;
            --incorrect-color: #DC3545; --star-color: #FFC107; --missing-color: #0D6EFD;
            --card-shadow: 0 4px 12px rgba(0,0,0,0.08); --border-radius: 8px;
        }
        @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap');
        body { font-family: 'Roboto', sans-serif; line-height: 1.6; background-color: var(--light-bg); color: var(--dark-text); margin: 0; padding: 20px; }
        .container { max-width: 1200px; margin: auto; background: #fff; padding: 20px 30px; border-radius: var(--border-radius); box-shadow: var(--card-shadow); }
        .tab-nav { display: flex; border-bottom: 2px solid #DEE2E6; margin-bottom: 25px; }
        .tab-button { padding: 10px 20px; cursor: pointer; border: none; background: none; font-size: 1.1em; font-weight: 500; color: var(--light-text); position: relative; transition: color 0.3s; }
        .tab-button.active { color: var(--primary-color); }
        .tab-button.active::after { content: ''; position: absolute; bottom: -2px; left: 0; right: 0; height: 2px; background: var(--primary-color); }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        h1, h2 { color: var(--primary-color); text-align: center; }
        h1 { margin-bottom: 20px; }
        button { transition: all 0.2s ease-in-out; }
        
        /* --- Quiz Styles --- */
        #quiz-container { text-align: center; }
        .quiz-controls { margin-bottom: 20px; display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 10px; border-bottom: 1px solid #dee2e6; padding-bottom: 20px; }
        .main-controls { display: flex; gap: 10px; flex-wrap: wrap; }
        .control-btn { background: var(--primary-color); color: #fff; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; font-size: 1em; }
        .control-btn:hover:not(:disabled) { background: #004170; transform: translateY(-2px); box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .control-btn:disabled { background-color: #CED4DA; cursor: not-allowed; transform: none; box-shadow: none; }

        /* Dropdown Styles */
        .dropdown { position: relative; display: inline-block; }
        .dropdown-content { display: none; position: absolute; background-color: #f1f1f1; min-width: 220px; box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2); z-index: 1; border-radius: var(--border-radius); overflow: hidden; max-height: 400px; overflow-y: auto; }
        .dropdown-content a { color: black; padding: 12px 16px; text-decoration: none; display: block; text-align: left; }
        .dropdown-content a:hover { background-color: #ddd; }
        .dropdown-content a.active { background-color: var(--primary-color); color: white; }
        .dropdown:hover .dropdown-content { display: block; }
        .dropdown .control-btn { display: flex; align-items: center; gap: 5px; }
        .dropdown .control-btn::after { content: ' ▼'; font-size: 0.7em; }

        #progress-bar-container { width: 100%; height: 10px; background-color: #E9ECEF; border-radius: 5px; margin-bottom: 20px; overflow: hidden; }
        #progress-bar { width: 0%; height: 100%; background-color: var(--secondary-color); transition: width 0.3s ease-in-out; }
        .question-card { background: #fff; padding: 25px; border: 1px solid #DEE2E6; border-radius: var(--border-radius); box-shadow: var(--card-shadow); min-height: 300px;}
        .question-header { display: flex; justify-content: space-between; align-items: flex-start; text-align: left; margin-bottom: 15px; }
        #question { font-size: 1.4em; margin: 0; padding-right: 20px; font-weight: 500; flex-grow: 1; }
        .star-icon { font-size: 2em; cursor: pointer; color: #CED4DA; transition: color 0.2s, transform 0.2s; }
        .star-icon.starred { color: var(--star-color); }
        .star-icon:hover { transform: scale(1.1); }
        #options { display: grid; grid-template-columns: 1fr; gap: 10px; text-align: left; }
        .option { background: #F8F9FA; border: 2px solid #DEE2E6; padding: 15px; border-radius: 5px; cursor: pointer; transition: all 0.2s ease-in-out; }
        .option:hover:not(.disabled) { background: #E9ECEF; border-color: var(--primary-color); }
        .option.correct { background-color: #D1E7DD; color: var(--correct-color); border-color: var(--correct-color); font-weight: bold; }
        .option.incorrect { background-color: #F8D7DA; color: var(--incorrect-color); border-color: var(--incorrect-color); }
        .option.disabled { cursor: not-allowed; opacity: 0.9; }
        #explanation { margin-top: 20px; padding: 15px; background: #E0EFFF; border-left: 5px solid var(--primary-color); text-align: left; display: none; border-radius: 0 5px 5px 0; }
        .bottom-navigation { display: flex; justify-content: space-between; margin-top: 20px; visibility: hidden; }
        #question-counter { margin-top: 15px; color: var(--light-text); font-weight: 500;}

        /* --- Meds Practice Styles --- */
        #meds-practice-container { display: flex; flex-direction: column; gap: 20px; }
        .meds-controls { display: flex; justify-content: center; align-items: center; flex-wrap: wrap; gap: 10px; margin-top: 10px; }
        .meds-controls button { background: var(--primary-color); color: #fff; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; font-size: 1em; }
        .meds-controls button:hover { background: #004170; transform: translateY(-2px); box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        #check-answers-controls button { background-color: var(--correct-color); }
        #check-answers-controls button:hover { background-color: #146c43; }
        #drug-profile-horizontal { display: flex; flex-wrap: wrap; gap: 15px; justify-content: center; }
        .category-box { background: #fff; padding: 10px; border: 1px solid #DEE2E6; border-radius: var(--border-radius); flex: 1; min-width: 220px; }
        .category-box h3 { margin: 0 0 10px 0; font-size: 1em; color: var(--primary-color); font-weight: 500; }
        .drop-zone { min-height: 40px; background: var(--light-bg); border: 2px dashed #CED4DA; border-radius: 5px; padding: 5px; transition: all 0.3s; }
        .drop-zone.drag-over { background: #E0EFFF; border-color: var(--primary-color); }
        .word-item { display: inline-block; padding: 5px 12px; background: #6c757d; color: white; border-radius: 15px; margin: 3px; cursor: grab; user-select: none; font-size: 0.9em; }
        .word-item.incorrect-placement { background-color: var(--incorrect-color); text-decoration: line-through; }
        .drop-zone.correct-zone { border: 2px solid var(--correct-color); }
        .missing-items-list { font-size: 0.85em; color: var(--missing-color); margin-top: 8px; padding-left: 15px; list-style-type: '↪ '; }
        #word-bank-bottom-container { margin-top: 20px; padding: 20px; background: var(--light-bg); border-radius: var(--border-radius); }
        #word-bank-bottom-container h3 { margin-top: 0; text-align: center; }
        #word-bank-search { width: 100%; padding: 10px; margin-bottom: 10px; border: 1px solid #CED4DA; border-radius: 5px; box-sizing: border-box; font-size: 1em; }
        #word-bank { max-height: 200px; overflow-y: auto; padding: 5px; }
        .hidden { display: none !important; }

    </style>
</head>
<body>

    <div class="container">
        <h1>EMT Pharmacology Study Tool</h1>
        
        <div class="tab-nav">
            <button class="tab-button active" onclick="openTab(event, 'quiz')">Pharmacology Quiz</button>
            <button class="tab-button" onclick="openTab(event, 'meds-practice')">Meds Practice</button>
        </div>

        <div id="quiz" class="tab-content active">
             <div id="quiz-container">
                <div class="quiz-controls">
                    <div class="dropdown">
                        <button class="control-btn" id="category-btn">Select Category</button>
                        <div class="dropdown-content" id="category-dropdown"></div>
                    </div>
                    <div class="main-controls">
                        <button id="scramble-btn" class="control-btn">Scramble Set</button>
                        <button id="review-starred-btn" class="control-btn">Review Starred (<span id="starred-count">0</span>)</button>
                    </div>
                </div>
                <div id="progress-bar-container"><div id="progress-bar"></div></div>
                <div class="question-card">
                    <div class="question-header">
                        <h2 id="question">Select a category to begin.</h2>
                        <span class="star-icon" id="star-btn">☆</span>
                    </div>
                    <div id="options"></div>
                    <div id="explanation"></div>
                    <div class="bottom-navigation">
                        <button id="prev-question-btn" class="control-btn">&laquo; Previous</button>
                        <button id="next-question-btn" class="control-btn">Next &raquo;</button>
                    </div>
                </div>
                <div id="question-counter"></div>
            </div>
        </div>

        <div id="meds-practice" class="tab-content">
             <h2 id="drug-name">Medication</h2>
            <div class="meds-controls">
                <button id="prev-drug-btn">&laquo; Previous</button>
                <div id="check-answers-controls">
                    <button id="check-answers-btn">Check Answers</button>
                    <button id="toggle-missing-btn" class="hidden">Show/Hide Missing</button>
                </div>
                <button id="next-drug-btn">Next &raquo;</button>
            </div>
            <div id="meds-practice-container">
                <div id="drug-profile-horizontal"></div>
                <div id="word-bank-bottom-container">
                    <h3>Word Bank</h3>
                    <input type="text" id="word-bank-search" placeholder="Search terms...">
                    <div id="word-bank"></div>
                </div>
            </div>
        </div>

    </div>

    <script>
        // --- DATA ---
        let questions = [];

        function populateAllQuestions() {
            questions = [
                // Category: Nitroglycerin (12 Questions)
                { question: "A 68-year-old male with a history of angina presents with crushing chest pain. His BP is 94/60 mmHg. He has his prescribed nitroglycerin spray. What is the most appropriate action?", category: 'Nitroglycerin', options: [ { text: "Withhold nitroglycerin and provide oxygen.", correct: true }, { text: "Administer 0.4 mg of nitroglycerin sublingually.", correct: false }, { text: "Administer 324 mg of aspirin, then the nitroglycerin.", correct: false }, { text: "Administer naloxone in case of an overdose.", correct: false } ], explanation: "Nitroglycerin is a vasodilator contraindicated when systolic BP is below 100 mmHg. Administering it would cause a dangerous drop in blood pressure. Naloxone is for opioid overdose and irrelevant here." },
                { question: "A patient's chest pain persists after one dose of nitroglycerin. BP is 130/80 mmHg. What is a critical question to ask before assisting with a second dose?", category: 'Nitroglycerin', options: [ { text: "Have you taken any erectile dysfunction medication in the last 48 hours?", correct: true }, { text: "Do you have a headache?", correct: false }, { text: "Are you allergic to aspirin?", correct: false }, { text: "Have you eaten in the last hour?", correct: false } ], explanation: "Erectile dysfunction medications (e.g., Viagra, Cialis) are potent vasodilators. Combining them with nitroglycerin can cause a severe, life-threatening drop in blood pressure. A headache is a common side effect, not a contraindication." },
                { question: "What is the primary mechanism of action for nitroglycerin in treating angina?", category: 'Nitroglycerin', options: [ { text: "It dilates coronary arteries and reduces cardiac workload.", correct: true }, { text: "It increases the heart's contractility force.", correct: false }, { text: "It breaks down existing blood clots.", correct: false }, { text: "It blocks pain receptors in the brain.", correct: false } ], explanation: "Nitroglycerin is a vasodilator. It widens blood vessels, which increases blood flow to the heart muscle and reduces the amount of blood returning to the heart (preload), decreasing its workload." },
                { question: "After assisting with nitroglycerin, the patient suddenly becomes lightheaded and pale. Your reassessment shows a BP of 88/50 mmHg. What is your immediate action?", category: 'Nitroglycerin', options: [ { text: "Place the patient in a supine position.", correct: true }, { text: "Administer a second dose of nitroglycerin.", correct: false }, { text: "Administer 324 mg of aspirin immediately.", correct: false }, { text: "Request permission to administer epinephrine.", correct: false } ], explanation: "The patient is experiencing hypotension, a common side effect of nitroglycerin. The immediate priority is to treat the low blood pressure by laying the patient supine to improve blood flow to the brain." },
                { question: "A patient states his sublingual nitroglycerin tablets no longer cause a tingling sensation. What might this indicate?", category: 'Nitroglycerin', options: [ { text: "The medication may have lost its potency.", correct: true }, { text: "The patient has developed a tolerance to the medication.", correct: false }, { text: "This is a normal response after prolonged use.", correct: false }, { text: "The medication is actually aspirin.", correct: false } ], explanation: "A characteristic tingling or burning sensation under the tongue is a sign of potent nitroglycerin. Its absence suggests the medication may be expired or degraded by light, heat, or air." },
                { question: "What is the standard time interval an EMT should wait before considering a second dose of nitroglycerin for persistent chest pain?", category: 'Nitroglycerin', options: [ { text: "5 minutes", correct: true }, { text: "2 minutes", correct: false }, { text: "10 minutes", correct: false }, { text: "Instantly, if pain is severe", correct: false } ], explanation: "Standard protocol is to wait 5 minutes after a dose to allow the medication to take full effect and to reassess the patient's vital signs and pain level before administering another dose." },
                { question: "You are treating a female patient for chest pain. When inquiring about contraindications for nitroglycerin, what is the most appropriate way to ask about ED medications?", category: 'Nitroglycerin', options: [ { text: "Ask if they have taken medications like Viagra or Cialis recently.", correct: true }, { text: "Ask if they are taking any heart medications.", correct: false }, { text: "Ask if they are taking any blood pressure medications.", correct: false }, { text: "Only ask male patients about these medications.", correct: false } ], explanation: "It is crucial to be direct and ask all adult patients about the use of erectile dysfunction drugs by name, as they can be used by any gender for various reasons and cause a fatal interaction." },
                { question: "A patient with a significant head injury from a fall is now complaining of chest pain. His BP is 140/90. Which of his conditions is a contraindication for nitroglycerin?", category: 'Nitroglycerin', options: [ { text: "The presence of a head injury.", correct: true }, { text: "The systolic blood pressure of 140 mmHg.", correct: false }, { text: "The fact that the pain started after a fall.", correct: false }, { text: "The patient's age.", correct: false } ], explanation: "Nitroglycerin can increase intracranial pressure by dilating cerebral blood vessels. This is contraindicated in patients with a potential or known head injury." },
                { question: "The primary therapeutic effect of nitroglycerin is to relieve pain by:", category: 'Nitroglycerin', options: [ { text: "Improving the oxygen supply/demand balance for the heart.", correct: true }, { text: "Slowing the heart rate significantly.", correct: false }, { text: "Thinning the blood to pass blockages.", correct: false }, { text: "Numbing the nerves around the heart.", correct: false } ], explanation: "By dilating coronary arteries (increasing oxygen supply) and reducing the heart's workload (decreasing oxygen demand), nitroglycerin resolves the ischemic pain of angina." },
                { question: "Why must EMTs wear gloves when handling nitroglycerin patches or paste?", category: 'Nitroglycerin', options: [ { text: "The medication can be absorbed through the skin, causing effects in the EMT.", correct: true }, { text: "The medication can stain the skin.", correct: false }, { text: "To prevent contamination of the medication.", correct: false }, { text: "It is a biohazard.", correct: false } ], explanation: "Nitroglycerin is readily absorbed transdermally. If an EMT handles it without gloves, they may absorb the medication, leading to a headache, lightheadedness, and hypotension." },
                { question: "A patient has a prescription for both nitroglycerin SL tablets and nitroglycerin PO capsules. The tablet bottle is empty. Can you substitute a capsule?", category: 'Nitroglycerin', options: [ { text: "No, the route of administration is different and cannot be substituted without a specific order.", correct: true }, { text: "Yes, if the dosage in milligrams is the same.", correct: false }, { text: "Yes, but have the patient chew the capsule first.", correct: false }, { text: "No, because all capsules are sugar pills.", correct: false } ], explanation: "The sublingual (SL) route provides rapid absorption. The oral (PO) route is for slower, sustained release. They are not interchangeable and substituting them would violate the 'Right Route' of medication administration." },
                { question: "Which of the following is an 'untoward effect' of nitroglycerin, as opposed to an 'unintended effect'?", category: 'Nitroglycerin', options: [ { text: "A significant drop in blood pressure.", correct: true }, { text: "A slight headache.", correct: false }, { text: "A burning sensation under the tongue.", correct: false }, { text: "Relief of chest pain.", correct: false } ], explanation: "An untoward effect is harmful to the patient. A significant drop in blood pressure can compromise perfusion. A headache or tingling are unintended effects, which are undesirable but pose little risk." },

                // Category: Epinephrine (12 Questions)
                { question: "A 25-year-old was stung by a wasp and is now experiencing stridor, hives, and a BP of 80/50 mmHg. Which medication is the first-line treatment?", category: 'Epinephrine', options: [ { text: "Epinephrine 0.3 mg IM", correct: true }, { text: "Diphenhydramine 50 mg PO", correct: false }, { text: "Albuterol via nebulizer", correct: false }, { text: "Oral Glucose", correct: false } ], explanation: "This patient is in anaphylactic shock. Epinephrine is the immediate life-saving treatment due to its vasoconstrictive and bronchodilatory effects. Diphenhydramine is a secondary treatment." },
                { question: "What is the correct dose of epinephrine for a 6-year-old child in anaphylaxis using an auto-injector?", category: 'Epinephrine', options: [ { text: "0.15 mg", correct: true }, { text: "0.3 mg", correct: false }, { text: "0.5 mg", correct: false }, { text: "1.0 mg", correct: false } ], explanation: "The standard pediatric auto-injector (EpiPen Jr.) for children delivers a 0.15 mg dose of epinephrine intramuscularly." },
                { question: "After administering epinephrine, you should inform the patient that they will likely experience:", category: 'Epinephrine', options: [ { text: "Increased heart rate, anxiety, and tremors", correct: true }, { text: "A slow heart rate and calmness", correct: false }, { text: "Drowsiness and fatigue", correct: false }, { text: "A sudden need to urinate.", correct: false } ], explanation: "Epinephrine is a sympathomimetic, mimicking a 'fight-or-flight' response. Common side effects include tachycardia, anxiety, and restlessness." },
                { question: "Epinephrine's effect on the cardiovascular system during anaphylaxis primarily involves:", category: 'Epinephrine', options: [ { text: "Vasoconstriction and increased heart rate.", correct:true }, { text: "Vasodilation and decreased heart rate.", correct: false }, { text: "Decreased blood pressure and bronchodilation.", correct: false }, { text: "Blocking histamine receptors in the heart.", correct: false } ], explanation: "Epinephrine's alpha-adrenergic effects cause vasoconstriction, which raises blood pressure. Its beta-adrenergic effects increase heart rate and cause bronchodilation." },
                { question: "What is the correct site for administering an epinephrine auto-injector?", category: 'Epinephrine', options: [ { text: "The lateral aspect of the thigh.", correct: true }, { text: "The deltoid muscle of the arm.", correct: false }, { text: "The subcutaneous tissue of the abdomen.", correct: false }, { text: "The gluteal muscle.", correct: false } ], explanation: "The auto-injector is designed for a rapid intramuscular injection into the large vastus lateralis muscle on the side of the thigh." },
                { question: "A patient with a history of severe hypertension and cardiac disease is having a severe anaphylactic reaction with airway compromise. Is epinephrine indicated?", category: 'Epinephrine', options: [ { text: "Yes, the life-threatening anaphylaxis outweighs the relative contraindications.", correct: true }, { text: "No, cardiac disease is an absolute contraindication.", correct: false }, { text: "Yes, but only half the standard dose should be given.", correct: false }, { text: "No, albuterol should be used instead.", correct: false } ], explanation: "In a true life-threatening anaphylaxis, there are no absolute contraindications for epinephrine. The risk of death from airway compromise is greater than the risk from its cardiovascular side effects." },
                { question: "How long should you hold an epinephrine auto-injector firmly against the patient's thigh after activation?", category: 'Epinephrine', options: [ { text: "Several seconds (typically 3-10, per manufacturer).", correct: true }, { text: "1-2 seconds", correct: false }, { text: "30 seconds", correct: false }, { text: "Until the patient feels relief.", correct: false } ], explanation: "Holding the injector in place for several seconds ensures that the full dose of the medication is delivered from the device into the muscle." },
                { question: "The term 'sympathomimetic' used to describe epinephrine means that it:", category: 'Epinephrine', options: [ { text: "Mimics the effects of the sympathetic nervous system.", correct: true }, { text: "Blocks the effects of the parasympathetic nervous system.", correct: false }, { text: "Causes the patient to feel sympathy.", correct: false }, { text: "Is a synthetic version of adrenaline.", correct: false } ], explanation: "Epinephrine mimics the hormones of the sympathetic nervous system (like adrenaline), producing the 'fight-or-flight' response: increased heart rate, bronchodilation, and vasoconstriction." },
                { question: "Five minutes after administering epinephrine, your patient's condition has not improved. What is your next step?", category: 'Epinephrine', options: [ { text: "Contact medical control for orders, which may include a second dose.", correct: true }, { text: "Immediately administer a second dose on your own authority.", correct: false }, { text: "Switch to an albuterol inhaler.", correct: false }, { text: "Begin transport without any further intervention.", correct: false } ], explanation: "Administration of a second dose of epinephrine typically requires a direct order from medical control after reassessing the patient and reporting their status." },
                { question: "What is the primary reason epinephrine is administered via IM injection rather than subcutaneously in an emergency?", category: 'Epinephrine', options: [ { text: "Absorption is much faster and more reliable from muscle tissue.", correct: true }, { text: "It is less painful in the muscle.", correct: false }, { text: "The subcutaneous route deactivates the medication.", correct: false }, { text: "It prevents skin irritation.", correct: false } ], explanation: "Muscles have a richer blood supply than the fatty subcutaneous layer, leading to faster and more consistent absorption, which is critical in a life-threatening emergency like anaphylaxis." },
                { question: "A patient has localized hives and itching after a bee sting but is breathing normally with a stable blood pressure. Is epinephrine indicated?", category: 'Epinephrine', options: [ { text: "No, epinephrine is only indicated for systemic reactions with respiratory or circulatory compromise.", correct: true }, { text: "Yes, all bee stings require epinephrine.", correct: false }, { text: "Yes, but a lower dose should be used.", correct: false }, { text: "No, diphenhydramine is the first-line drug for all allergic reactions.", correct: false } ], explanation: "Epinephrine is reserved for severe, systemic allergic reactions (anaphylaxis) that involve airway compromise or hypotension. A localized reaction does not meet the criteria." },
                { question: "Immediately after using an epinephrine auto-injector, what is the most important safety step for the EMT?", category: 'Epinephrine', options: [ { text: "Place the used device directly into a sharps container.", correct: true }, { text: "Recap the needle.", correct: false }, { text: "Hand the device back to the patient.", correct: false }, { text: "Clean the needle with an alcohol wipe.", correct: false } ], explanation: "The auto-injector contains an exposed needle after use. To prevent needlestick injuries, it must be disposed of immediately in an approved sharps container." },

                // Category: Naloxone (12 Questions)
                { question: "You find a 30-year-old male unresponsive with shallow respirations of 6 breaths/min and pinpoint pupils. What medication is most likely indicated?", category: 'Naloxone', options: [ { text: "Naloxone (Narcan)", correct: true }, { text: "Oral Glucose", correct: false }, { text: "Epinephrine", correct: false }, { text: "Aspirin", correct: false } ], explanation: "The triad of altered mental status, respiratory depression, and pinpoint pupils is classic for an opioid overdose. Naloxone is an opioid antagonist." },
                { question: "What is your immediate priority after administering naloxone to a patient who remains apneic?", category: 'Naloxone', options: [ { text: "Continue high-quality bag-mask ventilations.", correct: true }, { text: "Administer a second dose immediately.", correct: false }, { text: "Transport immediately.", correct: false }, { text: "Check for a pulse.", correct: false } ], explanation: "While naloxone is crucial, the definitive treatment for respiratory failure is ventilation. Never withhold ventilations while waiting for a medication to take effect." },
                { question: "After you administer naloxone, your patient wakes up and becomes extremely agitated and combative. This is most likely due to:", category: 'Naloxone', options: [ { text: "The patient experiencing acute opioid withdrawal.", correct: true }, { text: "An allergic reaction to the naloxone.", correct: false }, { text: "A paradoxical effect of the medication.", correct: false }, { text: "The naloxone causing a brain hemorrhage.", correct: false } ], explanation: "Naloxone rapidly reverses the effects of opioids, which can cause a sudden and severe withdrawal syndrome in dependent individuals. EMTs must be prepared for this and ensure their own safety." },
                { question: "What is the mechanism of action for naloxone?", category: 'Naloxone', options: [ { text: "It binds to opioid receptors, blocking the opioid's effect.", correct: true }, { text: "It stimulates the central nervous system.", correct: false }, { text: "It metabolizes opioids in the bloodstream.", correct: false }, { text: "It increases the body's production of adrenaline.", correct: false } ], explanation: "Naloxone is a competitive opioid antagonist. It has a higher affinity for opioid receptors than the opioid itself, so it displaces the opioid and reverses its effects, particularly respiratory depression." },
                { question: "You administer naloxone to a patient who then regains adequate respirations. Why is continued monitoring and transport still essential?", category: 'Naloxone', options: [ { text: "The naloxone may wear off before the opioid does, leading to a return of respiratory depression.", correct: true }, { text: "The hospital must administer a second dose of naloxone regardless.", correct: false }, { text: "Naloxone frequently causes delayed cardiac arrest.", correct: false }, { text: "The patient will need to be arrested for illegal drug use.", correct: false } ], explanation: "Many opioids have a longer duration of action than naloxone. The patient is at high risk of relapsing into respiratory depression once the naloxone is metabolized." },
                { question: "Which route is most commonly used by BLS providers to administer naloxone?", category: 'Naloxone', options: [ { text: "Intranasal (IN) via an atomizer.", correct: true }, { text: "Intravenous (IV)", correct: false }, { text: "Sublingual (SL)", correct: false }, { text: "Oral (PO)", correct: false } ], explanation: "The intranasal route is common for BLS providers as it is less invasive than an injection but still provides rapid absorption through the nasal mucosa." },
                { question: "When preparing to administer intranasal naloxone, you attach the vial to a mucosal atomizer device (MAD). What does the MAD do?", category: 'Naloxone', options: [ { text: "It turns the liquid medication into a fine mist for absorption.", correct: true }, { text: "It injects the liquid into the nasal bone.", correct: false }, { text: "It filters the medication before delivery.", correct: false }, { text: "It measures the correct dose automatically.", correct: false } ], explanation: "The MAD aerosolizes the liquid naloxone into a fine spray, which allows it to be absorbed across the large surface area of the nasal mucosa." },
                { question: "Can naloxone harm a patient who is unconscious from a condition other than an opioid overdose (e.g., hypoglycemia)?", category: 'Naloxone', options: [ { text: "No, naloxone has no significant effect in the absence of opioids.", correct: true }, { text: "Yes, it can cause severe hypoglycemia.", correct: false }, { text: "Yes, it can cause cardiac arrest in non-opioid patients.", correct: false }, { text: "No, but it will prevent other medications from working.", correct: false } ], explanation: "Naloxone is a pure opioid antagonist and is generally considered safe to administer even if the cause of unconsciousness is unknown, as it will have no effect if opioids are not present." },
                { question: "A bystander on scene tells you they already administered one dose of naloxone before your arrival, but the patient is still breathing at 4 times per minute. Your protocol allows for a second dose. What should you do?", category: 'Naloxone', options: [ { text: "Continue BVM ventilations and contact medical control to report the situation and request to give a second dose.", correct: true }, { text: "Withhold another dose as it is unlikely to work.", correct: false }, { text: "Immediately administer your dose without ventilating.", correct: false }, { text: "Assume the bystander's dose was ineffective and proceed as if no medication was given.", correct: false } ], explanation: "The priority is oxygenation via BVM. You must relay the critical information (prior dose given, patient still not breathing adequately) to medical control to guide your next steps, which may include another dose." },
                { question: "What is a major safety concern for the EMS crew after a patient has been revived with naloxone?", category: 'Naloxone', options: [ { text: "The patient may become violent or agitated due to acute withdrawal.", correct: true }, { text: "The patient may become calm and cooperative.", correct: false }, { text: "The patient may have an allergic reaction to the EMT.", correct: false }, { text: "The patient will fall back asleep immediately.", correct: false } ], explanation: "Sudden withdrawal can make patients extremely agitated, confused, or violent. Crews must prioritize their own safety and maintain a safe distance if necessary." },
                { question: "What is the goal of naloxone administration in the prehospital setting?", category: 'Naloxone', options: [ { text: "To restore adequate spontaneous respirations.", correct: true }, { text: "To have the patient become fully awake and alert.", correct: false }, { text: "To reverse all effects of the opioid, including euphoria.", correct: false }, { text: "To prepare the patient for police questioning.", correct: false } ], explanation: "The primary goal is not to fully wake the patient, which can precipitate severe withdrawal, but to reverse the life-threatening respiratory depression and restore adequate breathing." },
                { question: "The effects of naloxone are expected to last for:", category: 'Naloxone', options: [ { text: "30 to 90 minutes, potentially shorter than the opioid.", correct: true }, { text: "Several hours, longer than most opioids.", correct: false }, { text: "Less than 5 minutes.", correct: false }, { text: "Exactly 24 hours.", correct: false } ], explanation: "Naloxone has a shorter half-life than many opioids. This creates a risk that the patient will 're-narc' or fall back into respiratory depression as the naloxone wears off." },

                // Category: Aspirin (12 Questions)
                { question: "A 55-year-old male with non-traumatic chest pain has no allergies. What is the standard dose range for chewable aspirin?", category: 'Aspirin', options: [ { text: "162-324 mg", correct: true }, { text: "81 mg", correct: false }, { text: "500 mg", correct: false }, { text: "One 325 mg tablet, swallowed whole", correct: false } ], explanation: "The standard prehospital dose for aspirin in suspected AMI is 162-324 mg. Chewable aspirin is preferred for faster absorption." },
                { question: "Which of the following is an absolute contraindication for administering aspirin to a patient with chest pain?", category: 'Aspirin', options: [ { text: "Documented hypersensitivity to aspirin", correct: true }, { text: "History of hypertension", correct: false }, { text: "Patient is taking nitroglycerin", correct: "false" }, { text: "Heart rate of 120 bpm", correct: false } ], explanation: "A known allergy (hypersensitivity) to a medication is an absolute contraindication. Active bleeding is another." },
                { question: "Why is aspirin administered to patients with suspected acute myocardial infarction (AMI)?", category: 'Aspirin', options: [ { text: "It prevents platelets from aggregating and forming clots.", correct: true }, { text: "It is a powerful pain reliever for cardiac pain.", correct: false }, { text: "It dilates the coronary arteries.", correct: false }, { text: "It dissolves existing clots.", correct: false } ], explanation: "Aspirin's primary benefit in AMI is its antiplatelet effect, which helps prevent the progression of the clot causing the heart attack. It does not dissolve existing clots." },
                { question: "You are treating a 10-year-old child with a high fever and body aches. A bystander offers you some aspirin for the child. What should you do?", category: 'Aspirin', options: [ { text: "Politely decline, as aspirin is associated with Reye syndrome in children.", correct: true }, { text: "Administer a smaller, weight-based dose.", correct: false }, { text: "Administer the aspirin as offered.", correct: false }, { text: "Administer ibuprofen instead.", correct: false } ], explanation: "Aspirin administration to children with febrile illnesses is linked to Reye syndrome, a rare but serious condition that can cause swelling in the liver and brain. It is contraindicated for fever in children." },
                { question: "A patient with chest pain tells you they are taking warfarin (Coumadin), a blood thinner. Is aspirin still indicated?", category: 'Aspirin', options: [ { text: "Yes, aspirin is still indicated, but you must report the medication history.", correct: true }, { text: "No, taking another blood thinner is an absolute contraindication.", correct: false }, { text: "Yes, but only a small dose of 81 mg should be given.", correct: false }, { text: "No, the risk of bleeding is too high.", correct: false } ], explanation: "While caution is warranted, concurrent use of anticoagulants is not an absolute contraindication for a one-time dose of aspirin in a suspected AMI. The anti-platelet benefit outweighs the risk in this acute setting." },
                { question: "What does ASA stand for?", category: 'Aspirin', options: [ { text: "Acetylsalicylic Acid", correct: true }, { text: "American Safety Administration", correct: false }, { text: "Anti-Spasmodic Agent", correct: false }, { text: "Acute Symptom Analgesic", correct: false } ], explanation: "ASA is the medical abbreviation for acetylsalicylic acid, the chemical name for aspirin." },
                { question: "Which of the 'Rights' is most critical when a patient says they are 'allergic to NSAIDs' but not aspirin specifically?", category: 'Aspirin', options: [ { text: "Right Medication and Indication", correct: true }, { text: "Right Time", correct: false }, { text: "Right Documentation", correct: false }, { text: "Right Dose", correct: false } ], explanation: "Aspirin is a nonsteroidal anti-inflammatory drug (NSAID). An allergy to the class of drugs is a contraindication. Verifying this falls under ensuring you have the Right Medication and Indication." },
                { question: "Why is chewable aspirin preferred over swallowable tablets in the prehospital setting for chest pain?", category: 'Aspirin', options: [ { text: "It has a faster rate of absorption.", correct: true }, { text: "It is easier for patients to take.", correct: false }, { text: "It contains a lower dose of the medication.", correct: false }, { text: "It has fewer gastrointestinal side effects.", correct: false } ], explanation: "Chewing the aspirin begins the absorption process in the mouth, leading to a faster onset of its antiplatelet effects compared to being absorbed solely in the stomach." },
                { question: "A patient with chest pain reports they already took two 81 mg aspirin at home before calling 911. Your protocol is for 324 mg. What should you do?", category: 'Aspirin', options: [ { text: "Administer another two 81 mg tablets to reach the 324 mg dose.", correct: true }, { text: "Do not administer any more aspirin.", correct: false }, { text: "Administer another 324 mg dose.", correct: false }, { text: "Administer nitroglycerin instead.", correct: false } ], explanation: "The goal is to ensure the patient has received the full recommended dose of 162-324 mg. If they have already taken 162 mg, you should administer the remaining amount to reach the 324 mg upper limit per protocol." },
                { question: "Which of the following conditions is a relative contraindication for aspirin?", category: 'Aspirin', options: [ { text: "Asthma", correct: true }, { text: "Diabetes", correct: false }, { text: "Recent knee surgery", correct: false }, { text: "High cholesterol", correct: false } ], explanation: "Aspirin can exacerbate bronchospasm in some asthmatic patients, making it a relative contraindication. It should be used with caution in these patients." },
                { question: "The four main properties of aspirin are antipyretic, analgesic, anti-inflammatory, and:", category: 'Aspirin', options: [ { text: "Anti-platelet aggregator", correct: true }, { text: "Anti-coagulant", correct: false }, { text: "Anti-emetic", correct: false }, { text: "Anti-cholinergic", correct: false } ], explanation: "Aspirin's four key properties are reducing fever (antipyretic), reducing pain (analgesic), reducing inflammation, and inhibiting platelet clumping (anti-platelet aggregator)." },
                { question: "A patient with chest pain has a history of a recent ischemic stroke. Is aspirin contraindicated?", category: 'Aspirin', options: [ { text: "No, aspirin is not contraindicated.", correct: true }, { text: "Yes, any history of stroke is an absolute contraindication.", correct: false }, { text: "Yes, but only if the stroke was within 24 hours.", correct: false }, { text: "It is contraindicated only if the stroke was hemorrhagic.", correct: false } ], explanation: "Aspirin is a key treatment for preventing ischemic strokes. In the context of chest pain for a suspected AMI, a history of ischemic stroke is not a contraindication. A hemorrhagic stroke would be a concern." },

                // Category: Oral Glucose (12 Questions)
                { question: "A conscious 45-year-old diabetic is confused and diaphoretic. Her glucometer reads 42 mg/dL. Which medication is indicated?", category: 'Oral Glucose', options: [ { text: "One tube of oral glucose", correct: true }, { text: "A dose of her prescribed insulin", correct: false }, { text: "Naloxone 2 mg IN", correct: false }, { text: "A glass of water", correct: false } ], explanation: "A blood glucose of 42 mg/dL is hypoglycemia. Oral glucose is indicated to raise blood sugar. The patient must be conscious and able to swallow." },
                { question: "You are about to give oral glucose when the patient becomes unresponsive. What should you do?", category: 'Oral Glucose', options: [ { text: "Secure the airway, withhold the glucose, and request ALS.", correct: true }, { text: "Squeeze a small amount into their cheek.", correct: false }, { text: "Administer the full tube quickly.", correct: false }, { text: "Sit the patient upright.", correct: false } ], explanation: "Inability to swallow or protect one's airway is an absolute contraindication for oral glucose due to the high risk of aspiration." },
                { question: "What is the most common presentation of hypoglycemia?", category: 'Oral Glucose', options: [ { text: "Altered mental status.", correct: true }, { text: "Fruity breath odor and rapid breathing.", correct: false }, { text: "High blood pressure and a slow pulse.", correct: false }, { text: "Flushed, hot, and dry skin.", correct: false } ], explanation: "The brain relies on glucose to function. When levels are low, the most common presentation is an altered mental status. Hot, dry skin and fruity breath are signs of hyperglycemia (high blood sugar)." },
                { question: "Oral glucose is a form of:", category: 'Oral Glucose', options: [ { text: "Simple sugar (monosaccharide)", correct: true }, { text: "Complex carbohydrate", correct: false }, { text: "Protein", correct: false }, { text: "Hormone", correct: false } ], explanation: "Oral glucose is a simple sugar that can be absorbed directly into the bloodstream without the need for complex digestion, making it act quickly." },
                { question: "A patient with a known history of diabetes is found unconscious. Your glucometer is malfunctioning. Should you administer oral glucose?", category: 'Oral Glucose', options: [ { text: "No, an unconscious patient cannot swallow or protect their airway.", correct: true }, { text: "Yes, it is better to give it just in case.", correct: false }, { text: "Yes, but only half the normal dose.", correct: false }, { text: "No, because you do not have a BGL reading.", correct: false } ], explanation: "The patient's ability to swallow and protect their airway is the most critical factor. Administering anything orally to an unconscious patient poses a high risk of aspiration, regardless of their blood sugar level." },
                { question: "What are the two absolute contraindications for the administration of oral glucose?", category: 'Oral Glucose', options: [ { text: "Inability to swallow and unconsciousness.", correct: true }, { text: "Nausea and a history of stroke.", correct: false }, { text: "High blood pressure and a high heart rate.", correct: false }, { text: "Age under 12 and a recent meal.", correct: false } ], explanation: "To safely administer oral glucose, the patient must be conscious and have the ability to swallow the gel or tablets to prevent aspiration." },
                { question: "How is oral glucose typically administered to the patient?", category: 'Oral Glucose', options: [ { text: "Placed between the patient's cheek and gum.", correct:true }, { text: "Injected into a large muscle.", correct: false }, { text: "Mixed with water and drank.", correct: false }, { text: "Administered as a sublingual tablet.", correct: false } ], explanation: "Oral glucose gel is typically squeezed onto a tongue depressor and placed between the patient's cheek and gum for them to swallow and absorb." },
                { question: "After administering oral glucose, how soon should you reassess the patient's BGL and mental status?", category: 'Oral Glucose', options: [ { text: "Within 5-10 minutes", correct: true }, { text: "Instantly", correct: false }, { text: "After 30 minutes", correct: false }, { text: "Only upon arrival at the hospital", correct: false } ], explanation: "It takes several minutes for glucose to be absorbed and have an effect. Reassessment should be performed in a timely manner to gauge response and determine the need for further intervention." },
                { question: "A patient took their insulin but skipped breakfast. They are now confused and agitated. This condition is likely caused by:", category: 'Oral Glucose', options: [ { text: "An overdose of insulin relative to their glucose intake.", correct: true }, { text: "A stroke caused by their diabetes.", correct: false }, { text: "High blood sugar from not eating.", correct: false }, { text: "An allergic reaction to their insulin.", correct: false } ], explanation: "Insulin moves glucose out of the bloodstream. Without eating to replenish glucose, the administered insulin will drive the blood sugar to dangerously low levels, causing hypoglycemia." },
                { question: "You have administered a full tube of oral glucose. After 15 minutes, their BGL has only risen from 40 to 60 mg/dL and they remain confused. What should you do?", category: 'Oral Glucose', options: [ { text: "Consider a second dose per medical direction and ensure ALS is responding.", correct: true }, { text: "Administer a dose of aspirin.", correct: false }, { text: "Wait another 30 minutes for the first tube to work.", correct: false }, { text: "Have the patient drink a diet soda.", correct: false } ], explanation: "If the initial dose is not effective, protocols may allow for a second dose. It's also critical to have Advanced Life Support en route, as the patient may require intravenous dextrose." },
                { question: "The indication for oral glucose is a patient with a known history of diabetes who has:", category: 'Oral Glucose', options: [ { text: "An altered mental status and a low blood glucose reading.", correct: true }, { text: "Any altered mental status.", correct: false }, { text: "A high blood glucose reading.", correct: false }, { text: "Chest pain and shortness of breath.", correct: false } ], explanation: "The two key indications are a history of diabetes and a confirmed low blood glucose level (hypoglycemia), which is causing the altered mental status." },
                { question: "Why is giving a hypoglycemic patient a candy bar less effective in the short term than oral glucose?", category: 'Oral Glucose', options: [ { text: "The sugars in candy (like sucrose) are complex and require more digestion before absorption.", correct: true }, { text: "Candy bars contain too much sugar.", correct: false }, { text: "Oral glucose contains electrolytes.", correct: false }, { text: "Candy bars do not contain any usable sugar.", correct: false } ], explanation: "Oral glucose is a monosaccharide (a simple sugar) that is absorbed directly. Sugars in candy and fruit juice are often disaccharides that must be broken down first, delaying the response." },

                // Category: MDI/Albuterol (12 Questions)
                { question: "An asthmatic patient has audible wheezing. What is the primary action of their albuterol MDI?", category: 'MDI/Albuterol', options: [ { text: "Relaxes bronchial smooth muscle (bronchodilation)", correct: true }, { text: "Reduces airway inflammation", correct: false }, { text: "Dries up lung secretions", correct: false }, { text: "Stimulates the respiratory drive", correct: false } ], explanation: "Albuterol is a beta-2 agonist that causes bronchodilation, directly counteracting the bronchospasm of an asthma attack." },
                { question: "When assisting a patient with a metered-dose inhaler (MDI), what is the first step you should instruct the patient to do?", category: 'MDI/Albuterol', options: [ { text: "Exhale deeply.", correct: true }, { text: "Inhale deeply.", correct: false }, { text: "Shake the inhaler vigorously.", correct: false }, { text: "Hold their breath.", correct: false } ], explanation: "The patient should first exhale to empty their lungs, which allows for a deeper and more effective inhalation of the medication." },
                { question: "A patient is struggling to coordinate pressing the MDI canister and inhaling. What device would help them?", category: 'MDI/Albuterol', options: [ { text: "A spacer", correct: true }, { text: "A nebulizer mask", correct: false }, { text: "A nasal cannula", correct: false }, { text: "A non-rebreather mask", correct: false } ], explanation: "A spacer is a chamber that holds the aerosolized medication, allowing the patient to breathe it in without the need for perfect coordination, improving drug delivery to the lungs." },
                { question: "Common side effects of albuterol include:", category: 'MDI/Albuterol', options: [ { text: "Nervousness, tremors, and a fast heart rate.", correct: true }, { text: "Drowsiness and a slow heart rate.", correct: false }, { text: "Low blood pressure and dizziness.", correct: false }, { text: "Nausea and vomiting.", correct: false } ], explanation: "Albuterol is a sympathomimetic, similar to epinephrine. It often causes tachycardia (fast heart rate), anxiety, and tremors as side effects." },
                { question: "What is the difference between a 'rescue inhaler' (like albuterol) and a 'controller inhaler' (like Flovent)?", category: 'MDI/Albuterol', options: [ { text: "Rescue inhalers are for acute attacks; controller inhalers are for long-term prevention.", correct: true }, { text: "Controller inhalers are more powerful than rescue inhalers.", correct: false }, { text: "There is no difference; they are used interchangeably.", correct: false }, { text: "Rescue inhalers are always red, and controller inhalers are always purple.", correct: false } ], explanation: "Rescue inhalers (bronchodilators) provide immediate relief. Controller inhalers (often steroids) reduce inflammation over time and are not effective for an acute asthma attack." },
                { question: "After a patient uses their MDI, what should you instruct them to do to maximize medication delivery?", category: 'MDI/Albuterol', options: [ { text: "Hold their breath for several seconds.", correct: true }, { text: "Cough immediately.", correct: false }, { text: "Drink a glass of water.", correct: false }, { text: "Exhale forcefully.", correct: false } ], explanation: "Holding their breath for about 10 seconds allows the aerosolized medication to settle deep within the airways instead of being immediately exhaled." },
                { question: "A small-volume nebulizer (SVN) is often more effective than an MDI for a patient in severe respiratory distress because:", category: 'MDI/Albuterol', options: [ { text: "It allows the patient to receive the medication over several minutes of normal breathing.", correct: true }, { text: "It delivers a higher concentration of medication.", correct: false }, { text: "It is easier for the EMT to administer.", correct: false }, { text: "It contains an anti-inflammatory medication.", correct: false } ], explanation: "A patient in severe distress may not be able to take a deep, controlled breath. A nebulizer treatment allows them to receive the medication passively over 5-10 minutes of breathing." },
                { question: "What is the typical oxygen flow rate used to power a small-volume nebulizer?", category: 'MDI/Albuterol', options: [ { text: "6-8 L/min", correct: true }, { text: "2-4 L/min", correct: false }, { text: "15 L/min", correct: false }, { text: "1-2 L/min", correct: false } ], explanation: "A flow rate of 6-8 L/min is generally required to properly aerosolize the liquid medication in the nebulizer chamber." },
                { question: "A patient with a history of COPD and asthma presents with wheezing. They have both an albuterol MDI and an ipratropium (Atrovent) MDI. These medications work by:", category: 'MDI/Albuterol', options: [ { text: "Different mechanisms, providing greater bronchodilation together.", correct: true }, { text: "The same mechanism.", correct: false }, { text: "Albuterol is a steroid and ipratropium is a bronchodilator.", correct: false }, { text: "Albuterol is a rescue medication and ipratropium is a maintenance medication.", correct: false } ], explanation: "They are both bronchodilators but work on different receptors (beta-2 agonist vs. anticholinergic). They are often used together (e.g., DuoNeb) to achieve greater bronchodilation." },
                { question: "Before assisting with an MDI, the EMT must first:", category: 'MDI/Albuterol', options: [ { text: "Ensure the medication is prescribed to the patient and obtain a medical order.", correct: true }, { text: "Shake the canister for at least 30 seconds.", correct: false }, { text: "Take the patient's temperature.", correct: false }, { text: "Check the patient's pupils.", correct: false } ], explanation: "Assisting with any patient's prescribed medication requires confirming it belongs to them ('Right Patient') and following local protocols or getting a direct order from medical control." },
                { question: "A patient's MDI seems to be spraying propellant but not providing relief. This could indicate:", category: 'MDI/Albuterol', options: [ { text: "The medication canister is empty, but the propellant is not.", correct: true }, { text: "The patient is using the inhaler incorrectly.", correct: false }, { text: "The inhaler has expired.", correct: false }, { text: "The patient needs a higher dose.", correct: false } ], explanation: "MDIs can run out of medication while still containing propellant. This can be misleading, and if the patient is not improving, it's a possibility the MDI is empty of active drug." },
                { question: "Albuterol is classified as a:", category: 'MDI/Albuterol', options: [ { text: "Beta-2 agonist.", correct: true }, { text: "Beta-blocker.", correct: false }, { text: "Anticholinergic.", correct: false }, { text: "Corticosteroid.", correct: false } ], explanation: "Albuterol selectively stimulates beta-2 adrenergic receptors in the lungs, which leads to relaxation of the bronchial smooth muscles and subsequent bronchodilation." },

                // Category: Pharmacology Principles (15 questions)
                { question: "The term 'pharmacokinetics' refers to:", category: 'Pharmacology Principles', options: [ { text: "How the body absorbs, distributes, metabolizes, and eliminates a drug.", correct: true }, { text: "How a medication works on the body to produce its effects.", correct: false }, { text: "The reasons or conditions for which a particular medication is given.", correct: false }, { text: "Any unwanted side effects of a medication.", correct: false } ], explanation: "Pharmacokinetics is what the BODY does to the DRUG (ADME). Pharmacodynamics is what the DRUG does to the BODY." },
                { question: "The term 'pharmacodynamics' refers to:", category: 'Pharmacology Principles', options: [ { text: "The process by which a medication works on the body.", correct: true }, { text: "The study of how the body absorbs and eliminates a drug.", correct: false }, { text: "The name, dose, and route of a medication.", correct: false }, { text: "The study of medication dosages.", correct: false } ], explanation: "Pharmacodynamics is the study of what the DRUG does to the BODY, including the mechanism of action and the relationship between drug concentration and effect." },
                { question: "A medication that binds to a receptor and blocks other chemicals is an:", category: 'Pharmacology Principles', options: [ { text: "Antagonist", correct: true }, { text: "Agonist", correct: false }, { text: "Antibiotic", correct: false }, { text: "Antipyretic", correct: false } ], explanation: "An antagonist, or blocker, occupies a receptor site to prevent other substances from activating it. Naloxone is a classic opioid antagonist." },
                { question: "A medication that binds to a receptor and causes a specific action is an:", category: 'Pharmacology Principles', options: [ { text: "Agonist", correct: true }, { text: "Antagonist", correct: false }, { text: "Antiplatelet", correct: false }, { text: "Anticoagulant", correct: false } ], explanation: "An agonist is a medication that binds to a receptor site and stimulates a response. Albuterol is an agonist for beta-2 receptors." },
                { question: "The difference between a generic name and a trade name is:", category: 'Pharmacology Principles', options: [ { text: "The generic name is the nonproprietary name; the trade name is the brand name.", correct: true }, { text: "A medication can only have one trade name but multiple generic names.", correct: false }, { text: "Generic drugs are less effective than trade name drugs.", correct: false }, { text: "The trade name is always capitalized; the generic name is not.", correct: false } ], explanation: "The generic name (e.g., ibuprofen) is the official chemical name. The trade name (e.g., Advil, Motrin) is the brand name given by a manufacturer." },
                { question: "A 'relative contraindication' for a medication means:", category: 'Pharmacology Principles', options: [ { text: "The benefits of giving the drug in a specific situation may outweigh the risks.", correct: true }, { text: "The medication should never be given under any circumstances.", correct: false }, { text: "You must administer half the normal dose.", correct: false }, { text: "The medication is only contraindicated for relatives of the patient.", correct: false } ], explanation: "A relative contraindication means caution should be used, but if the patient's condition is serious enough, the benefits may outweigh the potential risks (e.g., giving epinephrine to a cardiac patient in anaphylaxis)." },
                { question: "The term 'polypharmacy' is most relevant when treating which patient population?", category: 'Pharmacology Principles', options: [ { text: "Geriatric patients", correct: true }, { text: "Pediatric patients", correct: false }, { text: "Trauma patients", correct: false }, { text: "Pregnant patients", correct: false } ], explanation: "Polypharmacy refers to the use of multiple medications by a single patient. This is extremely common in the geriatric population, increasing the risk of drug interactions, side effects, and medication errors." },
                { question: "A medication's 'therapeutic effect' is:", category: 'Pharmacology Principles', options: [ { text: "The desired or intended effect a medication is expected to have.", correct: true }, { text: "Any harmful side effect of a medication.", correct: false }, { text: "The maximum dose that can be safely given.", correct: false }, { text: "The way the body eliminates the medication.", correct: false } ], explanation: "The therapeutic effect is the beneficial and intended action of a drug, such as pain relief, blood pressure reduction, or bronchodilation." },
                { question: "Which of the following describes an 'indication' for a medication?", category: 'Pharmacology Principles', options: [ { text: "The reason or condition for which the medication is given.", correct: true }, { text: "A reason not to give the medication.", correct: false }, { text: "The side effects of the medication.", correct: "false" }, { text: "The class of the medication.", correct: false } ], explanation: "An indication is the specific clinical situation for which a drug is approved or used. For example, chest pain of cardiac origin is an indication for nitroglycerin." },
                { question: "Drowsiness after taking diphenhydramine (Benadryl) for an allergic reaction is considered an:", category: 'Pharmacology Principles', options: [ { text: "Unintended effect.", correct: true }, { text: "Untoward effect.", correct: false }, { text: "Therapeutic effect.", correct: false }, { text: "Allergic reaction.", correct: false } ], explanation: "An unintended effect is an adverse effect that is undesirable but poses little risk. An untoward effect is one that is harmful. The therapeutic effect would be the relief of allergy symptoms." },
                { question: "'Onset of action' is defined as the:", category: 'Pharmacology Principles', options: [ { text: "Time from administration until a clinical effect is seen.", correct: true }, { text: "Total length of time the medication's effects last.", correct: false }, { text: "Point at which the medication has its strongest effect.", correct: false }, { text: "Time it takes for the body to eliminate half of the medication.", correct: false } ], explanation: "Onset of action is the period it takes for a medication to start working after it has been administered." },
                { question: "Tylenol is the trade name for which generic medication?", category: 'Pharmacology Principles', options: [ { text: "Acetaminophen", correct: true }, { text: "Ibuprofen", correct: false }, { text: "Acetylsalicylic Acid", correct: false }, { text: "Naproxen", correct: false } ], explanation: "Acetaminophen is the generic, nonproprietary name for the medication. Tylenol is one of its many trade names, or brand names, given by a manufacturer." },
                { question: "Medications like clopidogrel (Plavix) and aspirin are classified as:", category: 'Pharmacology Principles', options: [ { text: "Antiplatelet medications.", correct: true }, { text: "Anticoagulant medications.", correct: false }, { text: "Beta-blockers.", correct: false }, { text: "Narcotic analgesics.", correct: false } ], explanation: "Antiplatelet medications work by preventing platelets from clumping together. Anticoagulants like warfarin interfere with the clotting cascade." },
                { question: "What does 'OTC' stand for in the context of medications?", category: 'Pharmacology Principles', options: [ { text: "Over-the-counter.", correct: true }, { text: "On-the-chart.", correct: false }, { text: "Order-to-call.", correct: false }, { text: "Official Therapeutic Class.", correct: false } ], explanation: "OTC medications can be purchased directly by a patient without a prescription." },
                { question: "A drug's 'peak' is the point when:", category: 'Pharmacology Principles', options: [ { text: "The maximum clinical effect is achieved.", correct: true }, { text: "The drug first starts to work.", correct: false }, { text: "The drug's effects have completely worn off.", correct: false }, { text: "The drug has been fully eliminated.", correct: false } ], explanation: "The peak is the time at which the medication reaches its highest concentration in the bloodstream and has its most potent effect." },

                // Category: Routes & Admin (15 questions)
                { question: "Which route provides the fastest absorption?", category: 'Routes & Admin', options: [ { text: "Intravenous (IV)", correct: true }, { text: "Intramuscular (IM)", correct: false }, { text: "Sublingual (SL)", correct: false }, { text: "Oral (PO)", correct: false } ], explanation: "IV administration delivers medication directly into the bloodstream, bypassing absorption for an immediate onset." },
                { question: "What does the abbreviation 'SL' stand for in a medication order?", category: 'Routes & Admin', options: [ { text: "Sublingual (under the tongue)", correct: true }, { text: "Subcutaneous (under the skin)", correct: false }, { text: "Saline Lock", correct: false }, { text: "Slowly", correct: false } ], explanation: "SL is the standard medical abbreviation for sublingual, a route used for rapid absorption through the oral mucosa." },
                { question: "A medication administered via the 'enteral' route enters the body through:", category: 'Routes & Admin', options: [ { text: "The digestive system", correct: true }, { text: "An injection", correct: false }, { text: "The lungs", correct: false }, { text: "The skin", correct: false } ], explanation: "Enteral medications enter via the gastrointestinal tract, such as oral (PO) or per rectum (PR) routes." },
                { question: "A medication administered via the 'parenteral' route enters the body:", category: 'Routes & Admin', options: [ { text: "By any route other than the digestive tract.", correct: true }, { text: "Only through the mouth.", correct: false }, { text: "Only through the rectum.", correct: false }, { text: "Only through an IV.", correct: false } ], explanation: "Parenteral routes bypass the digestive system and include injections (IV, IM, SC), inhalation, and transdermal absorption." },
                { question: "Administering naloxone via a mucosal atomizer device (MAD) is which route?", category: 'Routes & Admin', options: [ { text: "Intranasal (IN)", correct: true }, { text: "Intramuscular (IM)", correct: false }, { text: "Inhalation", correct: false }, { text: "Sublingual (SL)", correct: false } ], explanation: "A MAD aerosolizes medication for administration into the nostrils, which is the intranasal (IN) route." },
                { question: "Which of the following medications is administered via the oral (PO) route by an EMT?", category: 'Routes & Admin', options: [ { text: "Aspirin and Oral Glucose", correct: true }, { text: "Nitroglycerin and Epinephrine", correct: false }, { text: "Naloxone and Albuterol", correct: false }, { text: "Oxygen and Aspirin", correct: false } ], explanation: "Both aspirin and oral glucose are given by mouth (per os). Nitroglycerin is sublingual, epinephrine is intramuscular, and naloxone is intranasal or intramuscular." },
                { question: "Administering a medication via the intramuscular (IM) route involves injecting it into:", category: 'Routes & Admin', options: [ { text: "A large muscle.", correct: true }, { text: "The fatty tissue under the skin.", correct: false }, { text: "A vein.", correct: false }, { text: "The bone marrow.", correct: false } ], explanation: "IM injections deliver medication into vascular muscle tissue for moderately fast absorption." },
                { question: "A nicotine patch is an example of which route of administration?", category: 'Routes & Admin', options: [ { text: "Transcutaneous (transdermal)", correct: true }, { text: "Subcutaneous", correct: false }, { text: "Topical", correct: false }, { text: "Intradermal", correct: false } ], explanation: "Transcutaneous medications are absorbed through the skin to achieve a systemic (whole-body) effect." },
                { question: "Which route of administration has the slowest rate of absorption?", category: 'Routes & Admin', options: [ { text: "Oral (PO)", correct: true }, { text: "Sublingual (SL)", correct: false }, { text: "Intramuscular (IM)", correct: false }, { text: "Inhalation", correct: false } ], explanation: "The oral route is generally the slowest because the medication must pass through the digestive system before being absorbed into the bloodstream. Absorption can be unpredictable." },
                { question: "Intraosseous (IO) injection involves administering medication into:", category: 'Routes & Admin', options: [ { text: "The bone marrow.", correct: true }, { text: "The spinal fluid.", correct: false }, { text: "An artery.", correct: false }, { text: "The tissue between the skin and muscle.", correct: false } ], explanation: "IO is a route used in critical patients when IV access is not possible. The bone marrow provides a non-collapsible entry point to the venous system." },
                { question: "A cream applied to a rash is an example of which route?", category: 'Routes & Admin', options: [ { text: "Topical", correct: true }, { text: "Transcutaneous", correct: false }, { text: "Subcutaneous", correct: false }, { text: "Enteral", correct: false } ], explanation: "Topical medications are applied to the surface of the skin and are intended to affect only that area." },
                { question: "When you receive a medication order from medical control over the radio, what is the best practice?", category: 'Routes & Admin', options: [ { text: "Repeat the order back to the physician to confirm it.", correct: true }, { text: "Write the order down and then administer it.", correct: false }, { text: "Tell the physician '10-4' and administer the medication.", correct: false }, { text: "Ask your partner if they heard the same thing.", correct: false } ], explanation: "Repeating the order back, known as closed-loop communication or the echo technique, is a critical safety step to ensure you heard and understood the order correctly." },
                { question: "A suspension, such as activated charcoal, must be...?", category: 'Routes & Admin', options: [ { text: "Shaken thoroughly before administration.", correct: true }, { text: "Heated before administration.", correct: false }, { text: "Mixed with sterile water.", correct: false }, { text: "Administered with a special filter.", correct: false } ], explanation: "A suspension is a mixture where solid particles are suspended in a liquid. The particles will settle, so it must be shaken to ensure the patient receives the correct dose." },
                { question: "The 'per rectum' (PR) route is often used in children because:", category: 'Routes & Admin', options: [ { text: "It provides reliable absorption and is useful if the patient is vomiting.", correct: true }, { text: "It is the fastest route of administration.", correct: false }, { text: "It is completely painless.", correct: false }, { text: "It is the only way to give fever medications.", correct: false } ], explanation: "The PR route is useful in pediatric and unresponsive patients as it avoids the issue of vomiting and provides consistent absorption." },
                { question: "What does 'PO' stand for?", category: 'Routes & Admin', options: [ { text: "Per Os (by mouth)", correct: true }, { text: "Physician's Order", correct: false }, { text: "Post Operation", correct: false }, { text: "Patient Oriented", correct: false } ], explanation: "PO is the Latin abbreviation for 'per os', which means 'by mouth'." },

                // Category: Patient Safety (15 questions)
                { question: "Which of the 'Rights of Medication Administration' involves confirming the medication has not expired?", category: 'Patient Safety', options: [ { text: "Right Time", correct: true }, { text: "Right Dose", correct: false }, { text: "Right Patient", correct: false }, { text: "Right Route", correct: false } ], explanation: "The 'Right Time' includes two components: administering at the correct time interval and ensuring the medication is within its expiration date." },
                { question: "If a medication error occurs, what is the EMT's immediate priority?", category: 'Patient Safety', options: [ { text: "Assess and care for the patient.", correct: true }, { text: "Complete the patient care report accurately.", correct: false }, { text: "Notify a supervisor at the station.", correct: false }, { text: "Ask the patient not to mention the error.", correct: false } ], explanation: "Patient safety is always the priority. If an error occurs, the first step is to assess and manage the patient's condition. Notifying medical control and documenting are critical subsequent steps." },
                { question: "You are about to administer a medication, but you believe the order from medical control may harm the patient. What should you do?", category: 'Patient Safety', options: [ { text: "Politely question the order and voice your concerns to the physician.", correct: true }, { text: "Administer the medication as ordered.", correct: false }, { text: "Refuse to give the medication without explanation.", correct: false }, { text: "Give half the dose ordered.", correct: false } ], explanation: "As a provider, you are also responsible for your actions. If you have a legitimate concern, you have a duty to seek clarification from the ordering physician before administering a potentially harmful medication." },
                { question: "The 'medication cross-check' procedure is designed to:", category: 'Patient Safety', options: [ { text: "Prevent medication errors through verbal verification with a partner.", correct: true }, { text: "Check for drug interactions using a computer.", correct: false }, { text: "Ensure you have the correct number of pills in a bottle.", correct: false }, { text: "Verify the patient's insurance information.", correct: false } ], explanation: "The cross-check is a verbal confirmation between partners of the right drug, dose, route, and indication immediately before administration to catch potential errors." },
                { question: "A patient offers you a pill from an unlabeled bottle, stating it's 'for their heart.' What should you do?", category: 'Patient Safety', options: [ { text: "Do not administer the medication.", correct: true }, { text: "Administer the medication as requested.", correct: false }, { text: "Administer half the pill.", correct: false }, { text: "Crush the pill and mix it with water first.", correct: false } ], explanation: "You can only administer medications that you can positively identify and that are indicated for the patient's current condition. An unknown pill from an unlabeled bottle cannot be safely administered." },
                { question: "Which of the 'Rights' ensures you are giving nitroglycerin for chest pain and not for a headache?", category: 'Patient Safety', options: [ { text: "Right Indication", correct: true }, { text: "Right Dose", correct: false }, { text: "Right Patient", correct: false }, { text: "Right Time", correct: false } ], explanation: "The Right Indication means you are matching the medication to the patient's specific condition for which the drug is intended." },
                { question: "The process of 'patient-assisted medication' administration means:", category: 'Patient Safety', options: [ { text: "You are helping a patient administer their own prescribed medication.", correct: true }, { text: "You are administering a medication from your own drug box.", correct: false }, { text: "You are helping your partner administer a medication.", correct: false }, { text: "The patient is administering a medication to you.", correct: false } ], explanation: "Patient-assisted administration involves you assisting the patient with their own MDI, EpiPen, or nitroglycerin, as opposed to EMT-administered medications from your unit's supply." },
                { question: "After administering any medication, what is a crucial step that must be performed repeatedly?", category: 'Patient Safety', options: [ { text: "Reassessment of the patient and their vital signs.", correct: true }, { text: "Completing the billing information.", correct: false }, { text: "Recalculating the dose.", correct: false }, { text: "Asking the patient if they have a headache.", correct: false } ], explanation: "You must constantly reassess your patient to monitor for therapeutic effects, adverse effects, and any changes in their condition after an intervention." },
                { question: "The 'Right to Refuse' means that:", category: 'Patient Safety', options: [ { text: "A competent adult patient can refuse any and all treatment, including medications.", correct: true }, { text: "A patient can only refuse a medication if it is too expensive.", correct: false }, { text: "You, as the EMT, have the right to refuse to give a medication.", correct:false }, { text: "Only patients with a signed DNR can refuse medication.", correct: false } ], explanation: "A patient with decision-making capacity has the legal right to refuse care, even if it is life-saving. Your role is to inform them of the risks and benefits and document their refusal properly." },
                { question: "What is the final step after administering a medication and reassessing the patient?", category: 'Patient Safety', options: [ { text: "Documenting your actions and the patient's response.", correct: true }, { text: "Disposing of the medication packaging.", correct: false }, { text: "Asking the patient for their insurance card.", correct: false }, { text: "Notifying the receiving hospital that the medication was given.", correct: false } ], explanation: "If you didn't document it, it didn't happen. Accurate and thorough documentation of the drug, dose, route, time, and patient response is a critical medical and legal part of the call." },
                { question: "Choosing the wrong medication to administer is an example of what type of error?", category: 'Patient Safety', options: [ { text: "A knowledge-based error.", correct: true }, { text: "A skills-based error.", correct: false }, { text: "A rules-based error.", correct: false }, { text: "A documentation error.", correct: false } ], explanation: "A knowledge-based error occurs when the provider lacks the necessary information to make the correct decision. A skills-based error is a lapse in a physical action (e.g., using equipment incorrectly)." },
                { question: "Using incorrect equipment or procedure for administering a medication is an example of what type of error?", category: 'Patient Safety', options: [ { text: "A skills-based error.", correct: true }, { text: "A knowledge-based error.", correct: false }, { text: "A rules-based error.", correct: false }, { text: "An administrative error.", correct: false } ], explanation: "A skills-based error is when a provider knows what to do but performs the physical task incorrectly, like failing to use a spacer or activating an EpiPen improperly." },
                { question: "What is the best way to handle a patient's home medications?", category: 'Patient Safety', options: [ { text: "Bring the medications in a bag to the hospital with the patient.", correct: true }, { text: "Write down the names of the medications yourself.", correct: false }, { text: "Leave the medications at home.", correct: false }, { text: "Take photos of the medication bottles.", correct: false } ], explanation: "Bringing the actual bottles to the ED is the best practice. It allows the hospital staff to see the exact name, dose, and prescribing information, which can prevent errors." },
                { question: "Which of the following is NOT one of the 'Rights' of medication administration?", category: 'Patient Safety', options: [ { text: "Right Price", correct: true }, { text: "Right Patient", correct: false }, { text: "Right Dose", correct: false }, { text: "Right Documentation", correct: false } ], explanation: "While cost is a factor in healthcare, the 'Right Price' is not one of the recognized safety rights of medication administration. The rights focus on clinical safety: Patient, Medication, Dose, Route, Time, Documentation, etc." },
                { question: "Administering a medication that is outside your scope of practice is an example of what type of error?", category: 'Patient Safety', options: [ { text: "A rules-based error.", correct: true }, { text: "A skills-based error.", correct: false }, { text: "A knowledge-based error.", correct: false }, { text: "A communication error.", correct: false } ], explanation: "A rules-based error involves breaking a known rule or protocol. Administering a medication that you are not authorized to give falls into this category." },
                
                // Extra questions to reach 110
                { question: "An elderly patient is on multiple medications prescribed by different doctors. This is known as:", category: 'Patient Safety', options: [{ text: "Polypharmacy.", correct: true }, { text: "Pharmacodynamics.", correct: false }, { text: "Multi-dosing.", correct: false }, { text: "Geriatric syndrome.", correct: false }], explanation: "Polypharmacy is the concurrent use of multiple medications by a patient and is a major safety concern, especially in the elderly, due to the increased risk of drug interactions and side effects." },
                { question: "Oxygen is a medication. Which of the following is a key safety consideration during its administration?", category: 'Patient Safety', options: [{ text: "It is a potent combustion risk and should not be used near open flames.", correct: true }, { text: "It can cause severe hypertension.", correct: false }, { text: "It should never be given to COPD patients.", correct: false }, { text: "It is highly explosive.", correct: false }], explanation: "Oxygen itself does not burn, but it vigorously supports combustion, making fire a significant hazard. While it is not explosive, anything flammable will burn much hotter and faster in an oxygen-enriched environment." },
                { question: "What is the most appropriate first step when drawing up a liquid medication from a vial?", category: 'Routes & Admin', options: [{ text: "Confirm the medication name and expiration date.", correct: true }, { text: "Wipe the top with an alcohol prep pad.", correct: false }, { text: "Draw air into the syringe equal to the dose.", correct: false }, { text: "Check for discoloration or particulate matter.", correct: false }], explanation: "While all are important steps, the absolute first step before even touching the vial is to confirm you have the correct medication and it is not expired. This is part of the 'Right Medication' and 'Right Time' checks." },
                { question: "Which medication class does ibuprofen (Advil, Motrin) belong to?", category: 'Pharmacology Principles', options: [{ text: "NSAID (Nonsteroidal Anti-Inflammatory Drug)", correct: true }, { text: "Opioid Analgesic", correct: false }, { text: "Beta-Blocker", correct: false }, { text: "Antihistamine", correct: false }], explanation: "Ibuprofen is an NSAID that works by reducing inflammation, pain, and fever. It is important to distinguish from other analgesics like acetaminophen or opioids." },
                { question: "A patient with a history of liver failure should not be given which common OTC medication for pain or fever?", category: 'Pharmacology Principles', options: [{ text: "Acetaminophen (Tylenol)", correct: true }, { text: "Ibuprofen (Advil)", correct: false }, { text: "Aspirin", correct: false }, { text: "Naproxen (Aleve)", correct: false }], explanation: "Acetaminophen is metabolized by the liver. In a patient with liver failure, it can build up to toxic levels, causing further damage. It is a major contraindication." }
            ];
        }
        
        const drugData = {
            'Aspirin (Bayer)': { Action: ['Anti-inflammatory, anti-fever', 'prevents platelet clumping'], Indications: ['Relief of mild pain, headache', 'chest pain of cardiac origin'], Contraindications: ['Hypersensitivity', 'recent bleeding'], Route: ['PO (Per Os / By mouth)'], 'Adult Dose': ['160 to 324 mg chewable for chest pain'], 'Administration Concerns': ['Patient must be able to chew', 'do not give for trauma pain or fever in children'] },
            'Nitroglycerin (Nitrostat)': { Action: ['Dilates blood vessels'], Indications: ['Chest pain of cardiac origin'], Contraindications: ['Hypotension (SBP < 100)', 'use of ED medication within 48 hours', 'head injury'], Route: ['SL (Sublingual) tablet or spray'], 'Adult Dose': ['0.4 mg SL tablet or one spray'], 'Administration Concerns': ['Monitor BP closely', 'wear gloves', 'ensure ALS is en route'] },
            'Epinephrine (EpiPen)': { Action: ['Bronchodilation', 'vasoconstriction'], Indications: ['Anaphylactic reaction'], Contraindications: ['Chest pain of cardiac origin (relative)', 'hypothermia', 'hypertension (relative)'], Route: ['IM (Intramuscular)'], 'Adult Dose': ['0.3 mg for adult', '0.15 mg for child'], 'Administration Concerns': ['Effects last ~5 minutes', 'do not repeat dose', 'ensure ALS is en route'] },
            'Naloxone (Narcan)': { Action: ['Reverses respiratory depression from opioids'], Indications: ['Opioid poisoning with respiratory depression'], Contraindications: ['Hypersensitivity'], Route: ['IM (Intramuscular)', 'IN (Intranasal)'], 'Adult Dose': ['2 mg IM or IN'], 'Administration Concerns': ['Patient may wake up combative', 'may precipitate withdrawal'] },
            'Oral Glucose (Glutose)': { Action: ['Provides glucose for cell use'], Indications: ['Low blood glucose (hypoglycemia)'], Contraindications: ['Decreased LOC', 'inability to swallow'], Route: ['PO (Per Os / By mouth)'], 'Adult Dose': ['One 15g tube'], 'Administration Concerns': ['Patient must be awake and have control of airway'] },
            'Oxygen': { Action: ['Reverses hypoxia'], Indications: ['Hypoxia or suspected hypoxia'], Contraindications: ['Do not use near open flames'], Route: ['Inhalation'], 'Adult Dose': ['2-15 L/min via appropriate device'], 'Administration Concerns': ['Combustion risk', 'monitor respiratory effort'] },
            'Albuterol (Proventil)': { Action: ['Stimulates nervous system, causing bronchodilation'], Indications: ['Asthma/difficulty breathing with wheezing'], Contraindications: ['Hypersensitivity', 'tachycardia (relative)'], Route: ['Inhalation (MDI or nebulizer)'], 'Adult Dose': ['1-2 inhalations'], 'Administration Concerns': ['May cause tachycardia, anxiety', 'use spacer if possible'] }
        };

        const wordBankItems = new Set();
        Object.values(drugData).forEach(drug => { Object.values(drug).forEach(values => { values.forEach(value => wordBankItems.add(value.trim())) }) });

        // --- GLOBAL & DOM ELEMENTS ---
        let currentQuestionIndex = 0;
        let shuffledQuestions = [];
        let userAnswers = [];
        let activeCategory = null;
        let currentDrugIndex = 0;
        const drugList = Object.keys(drugData);

        const questionEl = document.getElementById('question');
        const optionsEl = document.getElementById('options');
        const explanationEl = document.getElementById('explanation');
        const prevButton = document.getElementById('prev-question-btn');
        const nextButton = document.getElementById('next-question-btn');
        const starButton = document.getElementById('star-btn');
        const questionCounterEl = document.getElementById('question-counter');
        const starredCountEl = document.getElementById('starred-count');
        const progressBar = document.getElementById('progress-bar');
        const categoryDropdownEl = document.getElementById('category-dropdown');
        const categoryBtn = document.getElementById('category-btn');
        
        const drugProfileEl = document.getElementById('drug-profile-horizontal');
        const drugNameEl = document.getElementById('drug-name');
        const wordBankEl = document.getElementById('word-bank');
        const wordBankSearchEl = document.getElementById('word-bank-search');
        const checkAnswersBtn = document.getElementById('check-answers-btn');
        const toggleMissingBtn = document.getElementById('toggle-missing-btn');
        const prevDrugBtn = document.getElementById('prev-drug-btn');
        const nextDrugBtn = document.getElementById('next-drug-btn');

        // --- QUIZ LOGIC ---
        function shuffleArray(array) { for (let i = array.length - 1; i > 0; i--) { const j = Math.floor(Math.random() * (i + 1)); [array[i], array[j]] = [array[j], array[i]]; } }

        function startQuiz(category = 'All') {
            activeCategory = category; let questionSet;
            if (category === 'All') { questionSet = [...questions]; } 
            else if (category === 'Starred') {
                questionSet = questions.filter(q => q.starred);
                if (questionSet.length === 0) { alert('You have no starred questions to review!'); return; }
            } else if (category === 'Random') { let all = [...questions]; shuffleArray(all); questionSet = all.slice(0, 20); } 
            else { questionSet = questions.filter(q => q.category === category); }
            shuffledQuestions = questionSet; userAnswers = new Array(shuffledQuestions.length).fill(null);
            currentQuestionIndex = 0; updateCategoryButtonText(); loadQuestion();
        }
        
        function loadQuestion() {
            const bottomNav = document.querySelector('.bottom-navigation');
            if (shuffledQuestions.length === 0) {
                 questionEl.textContent = "No questions in this set. Please select another category.";
                 optionsEl.innerHTML = ''; explanationEl.style.display = 'none';
                 questionCounterEl.textContent = ''; bottomNav.style.visibility = 'hidden';
                 progressBar.style.width = '0%'; return;
            }
            bottomNav.style.visibility = 'visible';
            const currentQuestion = shuffledQuestions[currentQuestionIndex];
            questionEl.textContent = currentQuestion.question; optionsEl.innerHTML = '';
            explanationEl.style.display = 'none';
            explanationEl.innerHTML = `<strong>Explanation:</strong> ${currentQuestion.explanation}`;
            currentQuestion.options.forEach(option => {
                const button = document.createElement('div');
                button.classList.add('option'); button.textContent = option.text;
                button.dataset.correct = option.correct; optionsEl.appendChild(button);
            });
            const answered = userAnswers[currentQuestionIndex];
            if (answered) { renderAnsweredState(answered); } 
            else { optionsEl.querySelectorAll('.option').forEach(btn => btn.addEventListener('click', selectAnswer)); }
            updateNavButtons(); updateStarIcon(); updateQuestionCounter(); updateProgressBar();
        }

        function selectAnswer(e) {
            const selectedButton = e.target;
            userAnswers[currentQuestionIndex] = { selectedText: selectedButton.textContent, isCorrect: selectedButton.dataset.correct === 'true' };
            renderAnsweredState(userAnswers[currentQuestionIndex]);
        }

        function renderAnsweredState(answer) {
             Array.from(optionsEl.children).forEach(button => {
                button.classList.add('disabled');
                const isCorrectAnswer = button.dataset.correct === 'true';
                const wasSelected = button.textContent === answer.selectedText;
                if (isCorrectAnswer) { button.classList.add('correct'); } 
                else if (wasSelected && !answer.isCorrect) { button.classList.add('incorrect'); }
            });
            explanationEl.style.display = 'block';
        }

        function updateNavButtons() { prevButton.disabled = currentQuestionIndex === 0; nextButton.disabled = currentQuestionIndex === shuffledQuestions.length - 1; }
        
        function populateCategoryDropdown() {
            const categories = ['All', 'Random', ...new Set(questions.map(q => q.category).sort())];
            categoryDropdownEl.innerHTML = '';
            categories.forEach(cat => {
                const link = document.createElement('a');
                link.href = "#"; link.dataset.category = cat;
                link.textContent = cat === 'Random' ? 'Random Quiz (20)' : cat;
                link.onclick = (e) => { e.preventDefault(); startQuiz(cat); };
                categoryDropdownEl.appendChild(link);
            });
        }
        
        function updateCategoryButtonText() {
            const catText = activeCategory === 'Random' ? 'Random Quiz' : activeCategory;
            categoryBtn.childNodes[0].nodeValue = `Category: ${catText} `;
            categoryDropdownEl.querySelectorAll('a').forEach(a => a.classList.toggle('active', a.dataset.category === activeCategory));
        }
        
        function updateProgressBar() { progressBar.style.width = shuffledQuestions.length > 0 ? `${((currentQuestionIndex + 1) / shuffledQuestions.length) * 100}%` : '0%'; }
        function updateQuestionCounter() { questionCounterEl.textContent = shuffledQuestions.length > 0 ? `Question ${currentQuestionIndex + 1} of ${shuffledQuestions.length}` : ''; }
        function updateStarredCount() { starredCountEl.textContent = questions.filter(q => q.starred).length; }
        
        function updateStarIcon() {
            if (!shuffledQuestions[currentQuestionIndex]) { starButton.classList.remove('starred'); starButton.textContent = '☆'; return; }
            const originalQuestion = questions.find(q => q.question === shuffledQuestions[currentQuestionIndex].question);
            starButton.classList.toggle('starred', !!originalQuestion?.starred);
            starButton.textContent = originalQuestion?.starred ? '★' : '☆';
        }

        function toggleStar() {
            if (!shuffledQuestions[currentQuestionIndex]) return;
            const originalQuestion = questions.find(q => q.question === shuffledQuestions[currentQuestionIndex].question);
            if (originalQuestion) {
                originalQuestion.starred = !originalQuestion.starred;
                updateStarIcon(); updateStarredCount();
            }
        }

        // --- MEDS PRACTICE LOGIC ---
        function loadDrugProfile(index) {
            const drugName = drugList[index]; drugNameEl.textContent = drugName; drugProfileEl.innerHTML = '';
            toggleMissingBtn.classList.add('hidden');
            Object.keys(drugData[drugName]).forEach(category => {
                const catBox = document.createElement('div');
                catBox.className = 'category-box';
                catBox.innerHTML = `<h3>${category}</h3><div class="drop-zone" data-category="${category}"></div>`;
                drugProfileEl.appendChild(catBox);
            });
            populateWordBank(); addDragAndDropListeners();
        }
        function populateWordBank() {
            wordBankEl.innerHTML = '';
            Array.from(wordBankItems).sort().forEach(itemText => {
                const item = document.createElement('div');
                item.className = 'word-item'; item.textContent = itemText; item.draggable = true;
                wordBankEl.appendChild(item);
            });
            filterWordBank();
        }
        function filterWordBank() {
            const filter = wordBankSearchEl.value.toUpperCase();
            wordBankEl.querySelectorAll('.word-item').forEach(item => {
                item.style.display = (item.textContent || item.innerText).toUpperCase().indexOf(filter) > -1 ? "" : "none";
            });
        }
        function addDragAndDropListeners() {
            const draggables = document.querySelectorAll('#meds-practice .word-item');
            const containers = document.querySelectorAll('#meds-practice .drop-zone, #word-bank');
            draggables.forEach(d => { d.addEventListener('dragstart', () => d.classList.add('dragging')); d.addEventListener('dragend', () => d.classList.remove('dragging')); });
            containers.forEach(c => {
                c.addEventListener('dragover', e => { e.preventDefault(); c.classList.add('drag-over'); });
                c.addEventListener('dragleave', () => c.classList.remove('drag-over'));
                c.addEventListener('drop', e => { e.preventDefault(); c.classList.remove('drag-over'); const d = document.querySelector('.dragging'); if (d) c.appendChild(d); });
            });
        }
        function resetFeedback() {
            document.querySelectorAll('.drop-zone').forEach(z => z.classList.remove('correct-zone'));
            document.querySelectorAll('.word-item').forEach(i => i.classList.remove('incorrect-placement'));
            document.querySelectorAll('.missing-items-list').forEach(l => l.remove());
        }
        function checkAnswers() {
            resetFeedback(); const drugName = drugList[currentDrugIndex]; const correctData = drugData[drugName];
            document.querySelectorAll('.drop-zone').forEach(zone => {
                const category = zone.dataset.category; const correctItems = correctData[category];
                const placedItems = Array.from(zone.children).map(child => child.textContent);
                let allCorrect = true;
                zone.querySelectorAll('.word-item').forEach(item => { if (!correctItems.includes(item.textContent)) { item.classList.add('incorrect-placement'); allCorrect = false; } });
                const missingItems = correctItems.filter(item => !placedItems.includes(item));
                if (missingItems.length > 0) {
                    allCorrect = false;
                    const missingList = document.createElement('ul'); missingList.className = 'missing-items-list hidden';
                    missingItems.forEach(item => { const li = document.createElement('li'); li.textContent = item; missingList.appendChild(li); });
                    zone.appendChild(missingList);
                }
                if (allCorrect) { zone.classList.add('correct-zone'); }
            });
            toggleMissingBtn.classList.remove('hidden');
        }
        function toggleMissing() { document.querySelectorAll('.missing-items-list').forEach(list => list.classList.toggle('hidden')); }


        // --- INITIALIZATION ---
        document.addEventListener('DOMContentLoaded', () => {
            populateAllQuestions();
            questions.forEach(q => q.starred = false);

            document.getElementById('scramble-btn').addEventListener('click', () => { shuffleArray(shuffledQuestions); userAnswers.fill(null); currentQuestionIndex = 0; loadQuestion(); });
            document.getElementById('review-starred-btn').addEventListener('click', () => startQuiz('Starred'));
            prevButton.addEventListener('click', () => { if(currentQuestionIndex > 0) { currentQuestionIndex--; loadQuestion(); } });
            nextButton.addEventListener('click', () => { if(currentQuestionIndex < shuffledQuestions.length - 1) { currentQuestionIndex++; loadQuestion(); } });
            starButton.addEventListener('click', toggleStar);
            
            wordBankSearchEl.addEventListener('keyup', filterWordBank);
            checkAnswersBtn.addEventListener('click', checkAnswers);
            toggleMissingBtn.addEventListener('click', toggleMissing);
            nextDrugBtn.addEventListener('click', () => { currentDrugIndex = (currentDrugIndex + 1) % drugList.length; loadDrugProfile(currentDrugIndex); });
            prevDrugBtn.addEventListener('click', () => { currentDrugIndex = (currentDrugIndex - 1 + drugList.length) % drugList.length; loadDrugProfile(currentDrugIndex); });

            populateCategoryDropdown();
            startQuiz('All');
            updateStarredCount();
            loadDrugProfile(currentDrugIndex);
        });
        
        function openTab(evt, tabName) {
            document.querySelectorAll(".tab-content").forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll(".tab-button").forEach(btn => btn.classList.remove('active'));
            document.getElementById(tabName).classList.add('active');
            evt.currentTarget.classList.add('active');
        }
    </script>
</body>
</html>
```